@using System.IO

<div class="static-assets-manager" style="@DisplayStyle">
    <div class="toast-header static-assets-manager-header">
        <h4 class="m-auto">Static Asset Manager</h4>
    </div>

    @if (Styles?.Any() ?? false)
    {
        <div>
            Styles:
            @for (int i = 0; i < Styles.Count; i++)
            {
                var style = Styles[i];
                var fileName = Path.GetFileName(style.Url);
                var id = $"style-{i}";
                <div class="static-asset-container">
                    <span class="font-weight-bold static-asset" title="@style.Url">@fileName</span>
                    <div class="custom-control custom-switch">
                        <input @onchange="@(eventArgs => ToggleAsync(style, (bool)eventArgs.Value))"
                               type="checkbox"
                               class="custom-control-input"
                               title="Toggle the asset"
                               checked="@style.Enabled"
                               id="@id">
                        <label class="custom-control-label" for="@id"></label>
                    </div>
                </div>
            }
        </div>
    }

    @if (Scripts?.Any() ?? false)
    {
        <div>
            Scripts:
            @for (int i = 0; i < Scripts.Count; i++)
            {
                var script = Scripts[i];
                var fileName = Path.GetFileName(script.Url);
                var id = $"script-{i}";
                <div class="static-asset-container">
                    <span class="font-weight-bold static-asset" title="@script.Url">@fileName</span>
                    <div class="custom-control custom-switch">
                        <input @onchange="@(eventArgs => ToggleAsync(script, (bool)eventArgs.Value))"
                               type="checkbox"
                               class="custom-control-input"
                               title="Toggle the asset"
                               checked="@script.Enabled"
                               id="@id">
                        <label class="custom-control-label" for="@id"></label>
                    </div>
                </div>
            }
        </div>
    }

    <h5 class="text-center mt-3">Add</h5>
    <form class="search-static-assets-wrapper mt-1" @onsubmit="@AddCdnStaticAssetAsync">
        <input @bind="@StaticAssetUrl" class="form-control manager-search-input" placeholder="JS/CSS file URL" />
        <button type="submit" class="btn btn-br-primary" title="Add">
            <i class="icon-plus"></i>
        </button>
    </form>
</div>
